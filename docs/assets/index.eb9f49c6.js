var e=Object.defineProperty,r=Object.defineProperties,o=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,n=(r,o,a)=>o in r?e(r,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[o]=a;import{az as i,aK as t,aR as d,aT as u,aL as m,aA as p,as as c,av as g,ax as f,ay as b,a$ as v,aH as w,aI as L,aM as F,aJ as h,aw as y}from"./vendor.7a066e5a.js";import"./index.f93d7e4f.js";const O=i({name:"Login",setup(){const e=m();p();const i=t(null),g=d({redirect:"",userLoginForm:{username:"",password:""},userLoginRules:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}]},loading:!1});mounted((()=>{})),unmounted((()=>{}));return f=((e,r)=>{for(var o in r||(r={}))s.call(r,o)&&n(e,o,r[o]);if(a)for(var o of a(r))l.call(r,o)&&n(e,o,r[o]);return e})({},u(g)),r(f,o({userLoginForm:i,resetFormFields:()=>{g.userLoginForm={username:"",password:""},i.value.resetFields()},handleLogin:()=>{const{username:r,password:o}=g.userLoginForm,a={username:r,password:o};i.value.validate((r=>{if(!r)return console.log("invalid form"),!1;g.loading=!0,store.dispatch("user/login",a).then((r=>{0==+r.code?(c.success("登录成功"),e.push({path:g.redirect||"/"})):c.error(r.message||"登录错误"),g.loading=!1})).catch((()=>{g.loading=!1}))}))}}));var f}}),j=w();L("data-v-0df476f4");const _={class:"login"},V=b("div",{class:"login-bk"},[b("div",{class:"login-bk-shadow"})],-1),k={class:"login-container"},x=F(" 登录 ");h();const P=j(((e,r,o,a,s,l)=>{const n=g("el-input"),i=g("el-form-item"),t=g("el-button"),d=g("el-form");return y(),f("div",_,[V,b("div",k,[b(d,{ref:"userLoginForm",model:e.userLoginForm,rules:e.userLoginRules,class:"login-form","label-position":"left"},{default:j((()=>[b(i,{prop:"username"},{default:j((()=>[b(n,{modelValue:e.userLoginForm.username,"onUpdate:modelValue":r[1]||(r[1]=r=>e.userLoginForm.username=r),"prefix-icon":"el-icon-user",placeholder:"用户名"},null,8,["modelValue"])])),_:1}),b(i,{prop:"password"},{default:j((()=>[b(n,{modelValue:e.userLoginForm.password,"onUpdate:modelValue":r[2]||(r[2]=r=>e.userLoginForm.password=r),"show-password":"","prefix-icon":"el-icon-lock",placeholder:"密码"},null,8,["modelValue"])])),_:1}),b(i,null,{default:j((()=>[b(t,{loading:e.loading,type:"primary",class:"login-btn",onClick:v(e.handleLogin,["prevent"])},{default:j((()=>[x])),_:1},8,["loading","onClick"])])),_:1})])),_:1},8,["model","rules"])])])}));O.render=P,O.__scopeId="data-v-0df476f4";export default O;
