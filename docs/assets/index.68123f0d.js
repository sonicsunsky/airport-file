var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{aL as r,ah as d,as as s,ak as c,aB as p,aJ as u,at as g,au as h,ai as m,aj as b,ad as y,aM as f,af as k,ag as w,aN as C,aO as v,av as _,aw as x,aA as z,aP as L,ap as P,aq as D,ar as F,ae as S}from"./vendor.6d01491c.js";const Q=[{label:"文件一级 1",children:[{label:"文件二级 1-1",children:[{label:"文件三级 1-1-1"}]}]},{label:"文件一级 2",children:[{label:"文件二级 2-1",children:[{label:"文件三级 2-1-1"}]},{label:"文件二级 2-2",children:[{label:"文件三级 2-2-1"}]}]},{label:"文件一级 3",children:[{label:"文件二级 3-1",children:[{label:"文件三级 3-1-1"}]},{label:"文件二级 3-2",children:[{label:"文件三级 3-2-1"}]}]}];const O=d({name:"File",setup(){h(),m();const e=b(),d=s({showDisclaimer:!0,keyword:"",defaultProps:{children:"children",label:"label"},catalogData:[],total:0,listQuery:{page:1,limit:10},tableLoading:!1,fileList:[]}),y=c((()=>e.getters["settings/device"]));p((()=>{d.catalogData=[...Q],d.total=100,k()})),u((()=>{}));const f=()=>{d.keyword="",k()},k=()=>{d.tableLoading=!0;const e=Math.floor(10*Math.random()+1);console.log(e),setTimeout((()=>{const a=(e=>new Array(e).fill("").map(((e,a)=>({id:a+1,role:Math.random()>.5?"admin":"visitor",name:`机场文件${a+1}`,status:Math.random()>.5?"read":"unread",date:r().format("YYYY-MM-DD HH:mm:ss"),link:"http://www.leomay.com/upload/file/mmo-20170707165001.pdf",url:"http://www.pwithe.com/Public/Upload/download/20170211/589ebf8e5bb13.pdf"}))))(e);d.fileList=[...a],d.tableLoading=!1}),500)};return w=((e,a)=>{for(var l in a||(a={}))o.call(a,l)&&i(e,l,a[l]);if(t)for(var l of t(a))n.call(a,l)&&i(e,l,a[l]);return e})({},g(d)),a(w,l({device:y,openFileDetail:({url:e})=>{e&&window.open(e,"_blank")},downloadFile:({link:e})=>{e&&window.open(e,"_blank")},onSearchFileList:()=>{""!==d.keyword.trim()&&k()},fetchFileList:f,handleSizeChange:e=>{d.listQuery.limit=e,f()},handleCurrentChange:e=>{d.listQuery.page=e,f()},handleTreeNodeClick:e=>{console.log(e),k()}}));var w}}),j=P();D("data-v-1963db46");const V={class:"file"},N=w("div",{class:"disclaimer"},[w("span",null," 免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明 免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明免责声明 ")],-1),U={class:"disclaimer-footer"},M=_("接受以上免责声明"),K={key:0,class:"lay-mobile"},T={class:"search-input"},Y=w("div",{class:"title"},"文件搜索",-1),A={class:"file-table"},H=_("查看详情"),I=_("下载"),q={key:1,class:"lay-pc"},B={class:"search-input"},E=w("div",{class:"title"},"文件搜索",-1),J={class:"file-table"},$=_("查看详情"),G=_("下载");F();const R=j(((e,a,l,t,o,n)=>{const i=y("el-button"),r=y("el-dialog"),d=y("el-tree"),s=y("el-input"),c=y("el-table-column"),p=y("el-tag"),u=y("el-table"),g=y("el-pagination"),h=y("el-col"),m=y("el-row"),b=f("loading");return S(),k("div",V,[w(r,{title:"免责声明弹窗",modelValue:e.showDisclaimer,"onUpdate:modelValue":a[2]||(a[2]=a=>e.showDisclaimer=a),width:"50%",center:"","show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1},{footer:j((()=>[w("div",U,[w(i,{type:"primary",onClick:a[1]||(a[1]=a=>e.showDisclaimer=!1)},{default:j((()=>[M])),_:1})])])),default:j((()=>[N])),_:1},8,["modelValue"]),"mobile"===e.device?(S(),k("div",K,[w(d,{accordion:"","default-expand-all":"","expand-on-click-node":!1,data:e.catalogData,props:e.defaultProps,onNodeClick:e.handleTreeNodeClick},null,8,["data","props","onNodeClick"]),w("div",T,[Y,w(s,{modelValue:e.keyword,"onUpdate:modelValue":a[3]||(a[3]=a=>e.keyword=a),placeholder:"请输入查询文件的名称",onKeyup:C(e.onSearchFileList,["enter"])},{append:j((()=>[w(i,{icon:"el-icon-search",onClick:e.onSearchFileList},null,8,["onClick"])])),_:1},8,["modelValue","onKeyup"])]),w("div",A,[v(w(u,{"element-loading-text":"文件加载中","element-loading-spinner":"el-icon-loading",data:e.fileList,stripe:"",style:{width:"100%"},"max-height":"1000px"},{default:j((()=>[w(c,{prop:"name",label:"文件名称"}),w(c,{label:"是否已读"},{default:j((({row:e})=>[w(p,{type:"read"===e.status?"success":"danger"},{default:j((()=>[_(x("read"===e.status?"已读":"未读"),1)])),_:2},1032,["type"])])),_:1}),w(c,{prop:"date",label:"上传时间"}),w(c,{label:"操作"},{default:j((({row:a})=>[w(i,{type:"text",onClick:l=>e.openFileDetail(a)},{default:j((()=>[H])),_:2},1032,["onClick"]),"admin"===a.role?(S(),k(i,{key:0,type:"text",onClick:l=>e.downloadFile(a)},{default:j((()=>[I])),_:2},1032,["onClick"])):z("",!0)])),_:1})])),_:1},8,["data"]),[[b,e.tableLoading]])]),v(w(g,{background:"","page-size":e.listQuery.limit,"onUpdate:page-size":a[4]||(a[4]=a=>e.listQuery.limit=a),"page-sizes":[10,20,30,50],currentPage:e.listQuery.page,"onUpdate:currentPage":a[5]||(a[5]=a=>e.listQuery.page=a),layout:"prev, pager, next",total:e.total,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["page-size","currentPage","total","onSizeChange","onCurrentChange"]),[[L,e.total>0]])])):(S(),k("div",q,[w(m,{type:"flex",gutter:10},{default:j((()=>[w(h,{xs:8,sm:8,md:6,lg:6,xl:6},{default:j((()=>[w(d,{accordion:"","default-expand-all":"","expand-on-click-node":!1,data:e.catalogData,props:e.defaultProps,onNodeClick:e.handleTreeNodeClick},null,8,["data","props","onNodeClick"])])),_:1}),w(h,{xs:16,sm:16,md:18,lg:18,xl:18},{default:j((()=>[w("div",B,[E,w(s,{modelValue:e.keyword,"onUpdate:modelValue":a[6]||(a[6]=a=>e.keyword=a),placeholder:"请输入查询文件的名称",onKeyup:C(e.onSearchFileList,["enter"])},{append:j((()=>[w(i,{icon:"el-icon-search",onClick:e.onSearchFileList},null,8,["onClick"])])),_:1},8,["modelValue","onKeyup"])]),w("div",J,[v(w(u,{"element-loading-text":"文件加载中","element-loading-spinner":"el-icon-loading",data:e.fileList,stripe:"",style:{width:"100%"},"max-height":"1000px"},{default:j((()=>[w(c,{prop:"name",label:"文件名称"}),w(c,{label:"是否已读"},{default:j((({row:e})=>[w(p,{type:"read"===e.status?"success":"danger"},{default:j((()=>[_(x("read"===e.status?"已读":"未读"),1)])),_:2},1032,["type"])])),_:1}),w(c,{prop:"date",label:"上传时间"}),w(c,{label:"操作"},{default:j((({row:a})=>[w(i,{type:"text",onClick:l=>e.openFileDetail(a)},{default:j((()=>[$])),_:2},1032,["onClick"]),"admin"===a.role?(S(),k(i,{key:0,type:"text",onClick:l=>e.downloadFile(a)},{default:j((()=>[G])),_:2},1032,["onClick"])):z("",!0)])),_:1})])),_:1},8,["data"]),[[b,e.tableLoading]])]),v(w(g,{background:"","page-size":e.listQuery.limit,"onUpdate:page-size":a[7]||(a[7]=a=>e.listQuery.limit=a),"page-sizes":[10,20,30,50],currentPage:e.listQuery.page,"onUpdate:currentPage":a[8]||(a[8]=a=>e.listQuery.page=a),layout:"total, sizes, prev, pager, next, jumper",total:e.total,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["page-size","currentPage","total","onSizeChange","onCurrentChange"]),[[L,e.total>0]])])),_:1})])),_:1})]))])}));O.render=R,O.__scopeId="data-v-1963db46";export default O;
//# sourceMappingURL=index.68123f0d.js.map
